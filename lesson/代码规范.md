# 代码规范

鉴于冬令营是团队合作项目，有一个好的代码习惯可以帮助自己和队友提高开发效率。

## 命名含义

一个优秀的命名应当是有含义的，使得其它程序员可以一眼看出它的大概作用。

正例：`userCount`，一眼看出是用户数量统计

反例：`count`，统计的是什么？还需要翻看上下文……

尽量不要缩写单词，除非它被广泛认可。

正例：`import numpy as np`

反例：`hs`→`high score`

控制命名长度，既不要为了过短而降低可读性，也不要为了详细说明含义而过长。

正例：`getStatusCode`

反例：`getStatusCodeAccordingToCalculationResult`，冗长

反例：`getSC`，SC是什么？可读性反而降低

不要使用汉语拼音！

正例：`green`

反例：`lv`，这是等级吗？

## 命名规范

> There are only two hard things in Computer Science: cache invalidation and naming things.

**驼峰命名法**

除第一个单词外，每一个单词的首字母均为大写。

第一个单词的首字母为大写的叫“大驼峰”，一般用于类、结构体等事物的命名，例如：

```
ServerLevel
HttpResponseStatus
```

第一个单词的首字母为小写的叫“小驼峰”，一般用于函数名、参数名、变量名等，例如：

```
studentName
playerHighScore
```

**蛇形命名法**

使用下划线连接多个单词，一般用于测试、常量、枚举等，例如：

```
DEFAULT_IP
MAX_TOKEN_LENGTH
```

## 善用缩进

缩进使用tab还是space？缩进长度是2、4、8？

这些其实都可以，只要项目统一即可，没有定论。我个人使用的是4格tab。

好的缩进可以提高可读性：

```cpp
for (...)
{
    ...
    for (...)
    {
        ...
    }
    ...
}
```

但是缩进层数过多反而会导致可读性下降：

```
                            }
                        }
                    }
                    else
                    {
                        ...
                    }
                }
            }
        }
    }
}
```

这个else是对应的哪个if来着？

为了避免这种情况，我们可以用以下几种方式降低缩进的层数：

**移除不必要的缩进**

如果一个代码块只有一行，可以不启用新的代码块（对Python无效），例如：

```cpp
for (...)
    for (...)
        ...
```

**使用相反的条件**

```cpp
void function()
{
    if (condition)
    {
        ...
    }
}
```

这种代码最外层的if是没有意义的，可以使用相反条件提前退出来优化，例如：

```cpp
void function()
{
    if (!condition) return;
    ...
}
```

**封装你的代码**

如果在使用以上两种方式的情况下仍然会使得你的代码有五层以上的缩进，说明这段代码的逻辑可能过于复杂了，你可能需要将其再次封装以提高可读性。

## 空格的使用

在英语文本书写中，标点符号的后面应该有一个空格，这样会拥有更好的可读性，例如：

```
I am thirsty.Can you give me some juice?No ice please!Thank you.
```

都挤在一块对吧，看着有点累，如果是这样呢？

```
I am thirsty. Can you give me some juice? No ice please! Thank you.
```

是不是好多了？另外，在使用部分工具的时候，类似于`juice?No`这样的片段会被认为是一个字符串来处理，但是`juice? No`则会被分成两个字符串，这一点是需要注意的。

在编程语言的编写中也是这样，一个关键字或者运算符也应当被认为是一个单词，应当与其它内容用空格隔开，例如：

```cpp
for (int i = 0; i < n; i += 2)
```

如果不使用空格，看上去会很累，像这样：

```cpp
for(int i=0;i<n;i+=2)
```

不过这一条也没那么绝对，因为如果表达式比较复杂，众多空格也会大幅提高行长度，破坏表达式的完整性。所以尽量不要在同一行内使用太多表达式，而应该使用新的变量来缩短它，例如以下代码：

```cpp
for (int i = 0; i < 4; i++)
{
    if (vis[x + dx[i] * STEP_LENGTH][y + dy[i] * STEP_LENGTH])
    {
        ...
    }
}
```

可以使用以下方式来提高可读性：

```cpp
for (int i = 0; i < 4; i++)
{
    int newx = x + dx[i] * STEP_LENGTH;
    int newy = y + dy[i] * STEP_LENGTH;
    if (vis[newx][newy])
    {
        ...
    }
}
```


